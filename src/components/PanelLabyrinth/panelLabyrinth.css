/* panelLabyrinth.css - camera 2D */

.pl-viewport {
  position: fixed;
  inset: 0;
  overflow: hidden;
  touch-action: none; /* important: we handle gestures */
  overscroll-behavior: none;
  height: 100vh;
}

.pl-world {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  transform: translate3d(0, 0, 0);
}

.pl-panel {
  position: absolute;
  width: 100vw;
  height: 100vh; /* snap panels are full-screen */
  overflow: auto; /* allows long text inside panel if needed */
}

.pl-panel-inner {
  min-height: 100%;
  padding: 0; /* neutral padding */
}

/* Active hook */


.pl-viewport.pl-glitch {
  animation: plGlitchPulse 220ms steps(3, end);
}

@keyframes plGlitchPulse {
  0%   { transform: translate3d(0,0,0) rotate(0deg) skew(0deg,0deg); }
  12%  { transform: translate3d(-16px, 6px, 0) rotate(-0.6deg) skew(-3deg, 0deg); }
  24%  { transform: translate3d(18px, -8px, 0) rotate(0.8deg) skew(2deg, -1deg); }
  36%  { transform: translate3d(-12px, -6px, 0) rotate(-0.4deg) skew(-2deg, 1deg); }
  48%  { transform: translate3d(10px, 7px, 0) rotate(0.5deg) skew(2deg, 0deg); }
  60%  { transform: translate3d(-8px, 3px, 0) rotate(-0.3deg) skew(-1deg, 0deg); }
  78%  { transform: translate3d(6px, -2px, 0) rotate(0.2deg) skew(1deg, 0deg); }
  100% { transform: translate3d(0,0,0) rotate(0deg) skew(0deg,0deg); }
}

.pl-viewport::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 60ms steps(2, end);
  mix-blend-mode: overlay;

  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,0.10) 0px,
      rgba(255,255,255,0.10) 1px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,0) 5px
    );
}

.pl-viewport.pl-glitch::after {
  opacity: 0.75;
}



/* Optional debug */
.pl-debug {
  position: fixed;
  left: 12px;
  bottom: 12px;
  font-size: 12px;
  padding: 8px 10px;
  opacity: 0.7;
  pointer-events: none;
}
.pl-panel {
  outline: 1px solid rgba(255,255,255,0.08);
}

.pl-viewport::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 80ms ease;
  /* Ruido simple con gradients, sin im√°genes */
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 1px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,0) 4px
    );
  mix-blend-mode: overlay;
}

.pl-viewport.pl-glitch::after {
  opacity: 0.6;
}

/* --- DEAD END: only when last panel is active --- */
.pl-panel.is-last.is-active {
  position: relative;
}

/* The message (pseudo-element, not indexable as content) */
.pl-panel.is-last.is-active::after {
    content: " ";
    font-family: "Syne Mono", monospace;
    position: absolute;
    right: 40vw;
    bottom: 25vh;
    font-size: 14px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #000;
    opacity: 0.98;
    pointer-events: none;
    padding: 12px 15px;
    border: 4px solid #111;
    background: url(../../assets/Images/dend.png) no-repeat 0 0;
    /* backdrop-filter: blur(2px); */
    width: 270px;
    height: 138px;
    transform: rotate(-6deg);
    transition: 0.4s all ease;
    box-shadow: -2px 2px 19px rgba(0, 0, 0, 0.40);
}

/* Strong tilt + shake (noticeable) */
.pl-panel.is-last.is-active .panel-container-right {
  transform-origin: 20% 30%;
  animation: plDeadEndTilt 220ms cubic-bezier(0.2, 0.9, 0.1, 1);
}
.pl-panel.is-last.is-active .panel-container-right,
.pl-panel.is-last.is-active {
  transform-origin: 50% 60%;
  animation: plDeadEndTilt 420ms cubic-bezier(0.2, 0.9, 0.1, 1);
}


.pl-panel {
  will-change: transform;
}


@keyframes plDeadEndTilt {
  0%   { transform: translate3d(0,0,0) rotate(0deg); }
  12%  { transform: translate3d(-10px, 6px, 0) rotate(-2.2deg); }
  24%  { transform: translate3d(12px, -8px, 0) rotate(2.6deg); }
  36%  { transform: translate3d(-9px, 5px, 0) rotate(-1.8deg); }
  52%  { transform: translate3d(7px, -4px, 0) rotate(1.2deg); }
  70%  { transform: translate3d(-3px, 2px, 0) rotate(-0.6deg); }
  100% { transform: translate3d(0,0,0) rotate(0deg); }
}